#!/usr/bin/env bash

set -e

if [ "$#" -ne 1 ]; then
    echo "Usage: todoist-delete <task_id>"
    exit 1
fi

task_id=$1

todoist show "$task_id"

read -p "Are you sure you want to delete this task? [y/N] " -n 1 -r

if [[ $REPLY =~ ^[Yy]$ ]]; then
    todoist delete "$task_id"
    echo "Task deleted."
else
    echo "Delete aborted."
fi

echo -n "Syncing..."
todoist sync
echo " done."
