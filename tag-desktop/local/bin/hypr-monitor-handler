#!/usr/bin/env bash
# Restore workspaces to their designated monitors when a monitor is connected

socat -U - "UNIX-CONNECT:$XDG_RUNTIME_DIR/hypr/$HYPRLAND_INSTANCE_SIGNATURE/.socket2.sock" | while read -r line; do
  case "$line" in
    monitoradded*)
      sleep 1
      # Find external monitor (any monitor that isn't the internal eDP-1)
      external=$(hyprctl monitors -j | jq -r '.[] | select(.name != "eDP-1") | .name' | head -1)
      if [[ -n "$external" ]]; then
        hyprctl dispatch moveworkspacetomonitor 9 "$external"
        hyprctl dispatch moveworkspacetomonitor 10 "$external"
      fi
      ;;
  esac
done
