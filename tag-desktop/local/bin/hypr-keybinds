#!/usr/bin/env bash
# Show Hyprland keybindings in fuzzel

hyprctl binds -j | jq -r '
  # Decode modifier bitmask to readable names
  def modifiers:
    ([
      if (. / 64 | floor) % 2 == 1 then "Super" else empty end,
      if (. / 8  | floor) % 2 == 1 then "Alt"   else empty end,
      if (. / 4  | floor) % 2 == 1 then "Ctrl"  else empty end,
      if . % 2 == 1               then "Shift" else empty end
    ] | join("+")) + (if . > 0 then "+" else "" end);

  .[] | "\(.modmask | modifiers)\(.key) â†’ \(.dispatcher) \(.arg)"
' | fuzzel --dmenu
