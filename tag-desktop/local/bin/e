#!/usr/bin/env bash

# If no arguments, just focus/launch nvim
if [[ $# -eq 0 ]]; then
  exec ensure-kitty-nvim
fi

# Launch/focus nvim window
ensure-kitty-nvim

nvimsocket="${XDG_RUNTIME_DIR}/nvimsocket"

# Wait for socket to exist
while [[ ! -e "$nvimsocket" ]]; do
  sleep 0.1
done

# Open files in existing nvim instance
nvr --servername "$nvimsocket" --nostart "$@"
